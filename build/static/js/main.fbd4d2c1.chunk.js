(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{48:function(e,t,r){},49:function(e,t,r){},75:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(23),i=r.n(c),o=(r(48),r(49),r(17)),s=r(3),u=r(4),l=r(11),h=r(12),d=r.n(h),j=r(18),f=r(13),b=r.n(f),v=r(19),O=r.n(v),y={saveToStorage:function(e,t){localStorage.setItem(e,JSON.stringify(t))},loadFromStorage:function(e){var t=localStorage.getItem(e);return JSON.parse(t)}};var p={getWeatherNow:function(e){return m(e).then((function(e){if(e.length)return e[0].Key})).then((function(e){var t="https://dataservice.accuweather.com/forecasts/v1/hourly/1hour/".concat(e,"?apikey=q2991AeoNGqDqjczrkRdqwAllJ0tLVfs&details=true&metric=true");return O.a.get(t).then((function(e){return y.saveToStorage("tel-aviv",e.data),e.data}))}))},fiveDayForecast:function(e){var t=e?e.Key:"215854",r="https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(t,"?apikey=q2991AeoNGqDqjczrkRdqwAllJ0tLVfs&details=true&metric=true");return O.a.get(r).then((function(e){return y.saveToStorage("5 day tel-aviv",e.data),e.data}))},getCityCode:m,getCityCodeByPos:function(e,t){var r="https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=q2991AeoNGqDqjczrkRdqwAllJ0tLVfs&q=".concat(e,"%2C").concat(t,"&details=true");return O.a.get(r).then((function(e){return e.data}))}};function m(e){var t="string"===typeof e?e:e.EnglishName,r="https://dataservice.accuweather.com/locations/v1/cities/search?apikey=q2991AeoNGqDqjczrkRdqwAllJ0tLVfs&q=".concat(t,"&language=en-us&details=true&offset=1");return O.a.get(r).then((function(e){return e.data}))}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"tel-aviv";return function(){var t=Object(j.a)(d.a.mark((function t(r){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.getCityCode(e);case 2:return a=t.sent,t.prev=3,t.next=6,p.getWeatherNow(e);case 6:n=t.sent,r({type:"SET_CITY",currCity:a}),r({type:"SET_CITY_WEATHER",currCityWeather:n}),t.next=14;break;case 11:return t.prev=11,t.t0=t.catch(3),t.abrupt("return",b()("Sorry","Couldn't find a city that matches your search","error",{button:"Try Again"}));case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}()}function x(e){return function(){var t=Object(j.a)(d.a.mark((function t(r){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.fiveDayForecast(e);case 2:a=t.sent,r({type:"SET_FIVE",forecast:a});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var C=r(1);function w(){var e=Object(u.c)((function(e){return e.weatherModule})),t=e.isCelsius,r=e.isDarkMode,a=Object(u.b)();return Object(C.jsxs)("div",{className:r?"header-dark":"header-light",children:[Object(C.jsxs)("h2",{children:["Herolo ",Object(C.jsx)("span",{children:" weather task "})," "]}),Object(C.jsxs)("div",{className:"nav-bar",children:[Object(C.jsx)(o.b,{exact:!0,to:"/",children:"Home"}),Object(C.jsx)(o.b,{to:"/favorites",children:"Favorites"}),Object(C.jsxs)("div",{className:"toggle-btns",children:[Object(C.jsx)("button",{onClick:function(){a((function(e){e({type:"TOGGLE_SCALE"})}))},children:t?"C\xb0":"F\xb0"}),Object(C.jsx)("button",{onClick:function(){a((function(e){e({type:"TOGGLE_DARK"})}))},children:r?"\u263e":"\ud83c\udf1e\ufe0e"})]})]})]})}function T(e){var t=e.city,r=e.setCity,n=Object(u.c)((function(e){return e.weatherModule})).isCelsius,c=Object(a.useState)(null),i=Object(l.a)(c,2),o=i[0],s=i[1];Object(a.useEffect)((function(){"Sunny"===t.cityWeather.IconPhrase?s(1):"Thunder storms"===t.cityWeather.IconPhrase?s(2):"Snow"===t.cityWeather.IconPhrase?s(3):"Mostly sunny"===t.cityWeather.IconPhrase?s(4):(t.cityWeather.IconPhrase,s(5))}),[]);var h=t.location,d=t.cityWeather,j=d.IconPhrase,f=d.Temperature;return o?Object(C.jsxs)("div",{className:"favorite-card",onClick:function(){r(t)},style:{backgroundImage:"url(./imgs/".concat(o,".png)")},children:[Object(C.jsx)("h2",{children:h.LocalizedName}),Object(C.jsx)("h2",{children:j}),Object(C.jsxs)("h2",{children:[function(){var e=f.Value;return n?Math.round(e):Math.round(1.8*e+32)}(),"\xb0"]})]}):Object(C.jsx)("h1",{children:"Loading..."})}function E(e){var t=e.favorites,r=e.setCity;return Object(C.jsx)("div",{className:"favorites-list",children:t.map((function(e,t){return Object(C.jsx)(T,{city:e,setCity:r},t)}))})}var k=function(e){var t=e.history.push,r=Object(u.c)((function(e){return e.weatherModule})).favorites,a=Object(u.b)();return r.length||b()("Sorry","No cities saved to Favorites yet","error",{button:"Go back"}).then((function(){t("/")})),Object(C.jsx)(E,{favorites:r,setCity:function(e){a(g(e.location.EnglishName)),t("/")}})},S=r(41),D=r.n(S);function _(e){var t=e.day,r=Object(u.c)((function(e){return e.weatherModule})).isCelsius,n=D()(t.Date).utc().format("MM/DD/YYYY"),c=Object(a.useState)(null),i=Object(l.a)(c,2),o=i[0],s=i[1];return Object(a.useEffect)((function(){"Sunny"===t.Day.IconPhrase?s(1):"Thunder storms"===t.Day.IconPhrase?s(2):"Snow"===t.Day.IconPhrase?s(3):"Mostly sunny"===t.Day.IconPhrase?s(4):(t.Day.IconPhrase,s(5))}),[]),o?Object(C.jsxs)("div",{className:"day-card",style:{backgroundImage:"url(./imgs/".concat(o,".png)")},children:[Object(C.jsx)("h2",{children:n}),Object(C.jsx)("h2",{children:["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date(n).getDay()]}),Object(C.jsxs)("h2",{children:[function(){var e=t.Temperature.Maximum.Value;return r?Math.round(e):Math.round(1.8*e+32)}(),"\xb0"]})]}):Object(C.jsx)("h1",{children:"Loading..."})}function I(e){var t=e.forecast;return Object(C.jsx)("div",{className:"forecast-list",children:null===t||void 0===t?void 0:t.map((function(e){return Object(C.jsx)(_,{day:e},e.Date)}))})}var N=function(){var e=Object(u.c)((function(e){return e.weatherModule})),t=e.fiveDayForecast,r=e.currCityWeather,n=e.currCity,c=e.favorites,i=e.isCelsius,o=e.isDarkMode,s=Object(u.b)(),h=Object(a.useState)(),f=Object(l.a)(h,2),v=f[0],O=f[1],y=Object(a.useState)(),m=Object(l.a)(y,2),w=m[0],T=m[1];Object(a.useEffect)((function(){navigator.geolocation.getCurrentPosition(E)}),[]);var E=function(e){var t,a;n||s(g(v)),r||s((t=e.coords.latitude,a=e.coords.longitude,function(){var e=Object(j.a)(d.a.mark((function e(r){var n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.getCityCodeByPos(t,a);case 2:return n=e.sent,e.next=5,p.getWeatherNow(n.EnglishName);case 5:c=e.sent,r({type:"SET_CITY_BY_POS",currCity:n}),r({type:"SET_CITY_WEATHER",currCityWeather:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),s(x(n))};Object(a.useEffect)((function(){T(c.some((function(e){return e.location.Key===n.Key}))),s(x(n))}),[c,n]);return r?Object(C.jsxs)("div",{className:o?"homepage-dark":"homepage-light",children:[Object(C.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(g(v))},children:[Object(C.jsx)("input",{className:"search-bar",type:"text",onChange:function(e){O(e.target.value)},placeholder:"Search cities",value:v}),Object(C.jsx)("button",{className:"search-btn",children:"Search"})]}),Object(C.jsxs)("div",{className:"home-top",children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("h2",{children:n.LocalizedName}),Object(C.jsxs)("h2",{children:[function(){var e=r[0].Temperature.Value;return i?Math.round(e):Math.round(1.8*e+32)}(),"\xb0"]})]}),Object(C.jsx)("button",{className:"fav-btn",onClick:function(){var e;n&&(w?b()("City removed from your favorites.",""):b()("City saved to Favorites.",""),s((e=n,function(){var t=Object(j.a)(d.a.mark((function t(r,a){var n,c,i,o,s,u;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.getWeatherNow(e.LocalizedName);case 2:n=t.sent,c=Object(l.a)(n,1),i=c[0],o=a().weatherModule.favorites,s={location:e,cityWeather:i},u=o.some((function(e){return e.location.Key===s.location.Key})),r(u?{type:"REMOVE_CITY",city:s}:{type:"ADD_CITY",city:s});case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}())))},children:w?"Remove From Favorites":"Add To Favorites"})]}),Object(C.jsx)("h1",{children:r[0].IconPhrase}),Object(C.jsx)(I,{forecast:t.DailyForecasts})]}):Object(C.jsx)("h1",{children:"Loading..."})};function M(){var e=Object(u.c)((function(e){return e.weatherModule})).isDarkMode;return Object(C.jsxs)("div",{className:e?"footer-dark":"footer-light",children:[Object(C.jsx)("h3",{children:"\xa9 2021 Omer Liv"}),Object(C.jsx)("a",{href:"https://www.linkedin.com/in/omer-liv-7941a4213/",children:Object(C.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/LinkedIn_logo_initials.png/600px-LinkedIn_logo_initials.png"})})]})}var L=function(){var e=Object(u.c)((function(e){return e.weatherModule})).isDarkMode;return Object(C.jsx)("div",{className:e?"dark":"light",children:Object(C.jsx)("div",{className:"content-wrap",children:Object(C.jsxs)(o.a,{children:[Object(C.jsx)(w,{}),Object(C.jsxs)(s.c,{children:[Object(C.jsx)(s.a,{path:"/favorites",component:k}),Object(C.jsx)(s.a,{path:"/",component:N})]}),Object(C.jsx)(M,{})]})})})},F=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,76)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),a(e),n(e),c(e),i(e)}))},P=r(20),W=r(42),A=r(43),q=r(5),Y={currCity:null,currCityWeather:null,favorites:[],fiveDayForecast:[],isCelsius:!0,isDarkMode:!1};var G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.c,R=Object(P.b)({weatherModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CITY":return Object(q.a)(Object(q.a)({},e),{},{currCity:t.currCity[0]});case"SET_CITY_BY_POS":return Object(q.a)(Object(q.a)({},e),{},{currCity:t.currCity});case"SET_CITY_WEATHER":return Object(q.a)(Object(q.a)({},e),{},{currCityWeather:t.currCityWeather});case"SET_FIVE":return Object(q.a)(Object(q.a)({},e),{},{fiveDayForecast:t.forecast});case"ADD_CITY":return Object(q.a)(Object(q.a)({},e),{},{favorites:[].concat(Object(A.a)(e.favorites),[t.city])});case"REMOVE_CITY":return Object(q.a)(Object(q.a)({},e),{},{favorites:e.favorites.filter((function(e){return e.location.Key!==t.city.location.Key}))});case"TOGGLE_SCALE":return Object(q.a)(Object(q.a)({},e),{},{isCelsius:!e.isCelsius});case"TOGGLE_DARK":return Object(q.a)(Object(q.a)({},e),{},{isDarkMode:!e.isDarkMode});default:return e}}}),V=Object(P.d)(R,G(Object(P.a)(W.a)));i.a.render(Object(C.jsx)(n.a.StrictMode,{children:Object(C.jsx)(u.a,{store:V,children:Object(C.jsx)(L,{})})}),document.getElementById("root")),F()}},[[75,1,2]]]);
//# sourceMappingURL=main.fbd4d2c1.chunk.js.map